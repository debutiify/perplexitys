"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8126],{3042:(e,t,a)=>{a.d(t,{c:()=>r});let r=(0,a(27773).w)({path:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z",name:"IconCircleCheckFilled",variant:"filled"})},14489:(e,t,a)=>{a.d(t,{W:()=>i});var r=a(85860),s=a(64299),l=a.n(s);let i=e=>{let{children:t,className:a,as:s="div",active:i=!0,speed:n="normal",hoverOnly:o=!1,variant:c="default"}=e,[d,u]=(0,r.useState)(!1),m=o?d:i;return r.createElement(s,{style:{animationDuration:"normal"===n?"1200ms":"1800ms"},className:l()({shimmer:m&&"default"===c,"animate-gradient bg-clip-text text-transparent shimmer-super":m&&"super"===c},a),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)},t)}},18126:(e,t,a)=>{a.d(t,{dQ:()=>T,jW:()=>_,q:()=>D});var r=a(25576),s=a(85860),l=a(83081),i=a(64299),n=a.n(i),o=a(47575),c=a(83105),d=a(43084);let u=(0,s.memo)(e=>{let{className:t,innerClassName:a,gridClassName:l,children:i,fadeOut:o,dotClassName:c,highlightClassName:u,animate:f=!0,gridSize:h=22,count:x=20,style:p}=e,[g,{width:v,height:j}]=(0,d.A)(),[b,y]=(0,s.useState)([]),[w,N]=(0,s.useState)(0),[P,M]=(0,s.useState)(0),A=(0,s.useRef)(null),C=(0,s.useRef)(new Set),E=(0,s.useCallback)(()=>{let e=Math.floor(Math.random()*w)+1,t=Math.floor(Math.random()*P)+1,a="".concat(e,"-").concat(t);if(C.current.has(a))return;let r={col:e,row:t,id:a,duration:Math.floor(1001*Math.random())+1e3,isSuper:Math.floor(5*Math.random())%5==0};y(e=>{let t=[r,...e];if(t.length>x){let e=t.pop();e&&C.current.delete(e.id)}return C.current.add(a),t})},[w,P,x]);return(0,s.useEffect)(()=>{if(f)return A.current=setInterval(E,100),()=>{A.current&&clearInterval(A.current)}},[E,f]),(0,s.useEffect)(()=>{N(Math.floor(v/h)),M(Math.floor(j/h))},[v,j,h]),(0,r.jsxs)("div",{className:n()("bg-base dotGridContainer pointer-events-none relative isolate",t),ref:g,style:p,children:[(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden",style:o?{maskImage:"radial-gradient(black, transparent)"}:void 0,children:[(0,r.jsx)("div",{className:n()("dotHighlightGrid bg-inverse/20 absolute inset-0",u),children:b.map(e=>(0,r.jsx)(m,{item:e,className:c},e.id))}),(0,r.jsx)("div",{className:n()("dotGrid absolute inset-0",l)})]}),(0,r.jsx)("div",{className:n()("relative",a),children:i})]})});u.displayName="DotGrid";let m=(0,s.memo)(e=>{let{item:t,className:a}=e;return(0,r.jsx)("div",{className:n()("gridDot text-foreground",a,{highlight:t.isSuper}),style:{gridColumn:t.col,gridRow:t.row,animationDuration:"".concat(t.duration,"ms")}})});m.displayName="GridDot";var f=a(55776),h=a(14489),x=a(80892),p=a(38481),g=a(84607),v=a(89412),j=a(12839),b=a(60410),y=a(28554),w=a(20041),N=a(35052),P=a(38683),M=a(69744),A=a(30002),C=a(3042),E=a(49427),S=a(21978),k=a(62615),R=a(81080),O=a(65917);function _(){return(0,O.Mj)("pplx.partner_banner",null,{initializeWithValue:!1})}function D(){return(0,O.Mj)("pplx.partner_discount_code",null,{initializeWithValue:!1})}let L=["redeem"],T=e=>{let{partnerCode:t,partnerConfig:a,partnerMessages:i,disallowedMethods:d=["sso"],showLoginCloseButton:m=!0}=e,y=(0,c.L)(),{trackEvent:w}=(0,x.yw)(),P="discount_code",O=(0,k.ok)(),T=null==O?void 0:O.get(P),[Y,G]=(0,s.useState)(T||""),W=(0,s.useRef)(!1),[z,Q]=(0,s.useState)(!0),[V,B]=(0,s.useState)(""),{hasAccessToProFeatures:K}=(0,o.E)(),Z=(0,S.rd)(),{$t:q}=(0,l.A)(),{colorScheme:H,isColorSchemeReady:X}=(0,N.U)({addSecondPass:!0}),[J,$]=(0,s.useState)(!1),ee=(0,k.a8)(),[,et]=_(),[ea,er]=D(),es=!K||a.allowExistingSubscribersToRedeem,el=(0,s.useCallback)(async e=>{if(!e||W.current)return;W.current=!0,B(""),w("pro partner landing page discount code attempt",{discountCode:e,partnerCode:t});let r=await (0,p.U7)({discountCode:e,reason:"partner-signup"});if((null==r?void 0:r.status)==="success")w("pro partner landing page discount code validated",{discountCode:e,partnerCode:t}),$(!0),a.maskPromoCodeFromQueryParams||er(e),setTimeout(()=>{y?Z.push("/join/p/".concat(t,"/").concat(e)):(Q(!1),$(!1))},2e3);else{var s;switch(W.current=!1,Q(!0),w("pro partner landing page discount code error",{discountCode:e,partnerCode:t,errorCode:null!==(s=null==r?void 0:r.error_code)&&void 0!==s?s:"unknown"}),null==r?void 0:r.error_code){case"PROMO_CODE_CUSTOMER_NOT_FIRST_TIME":B(q({defaultMessage:"This code is only valid for first-time customers",id:"bWwU4Dyn3T"}));break;case"EXPIRED":B(q({defaultMessage:"This code has expired",id:"1cfpDBU4G9"}));break;case"ALREADY_REDEEMED":B(q({defaultMessage:"This code has already been redeemed",id:"zOkXsrcyGc"}));break;case"INVALID_PRODUCT":B(q({defaultMessage:"Please enter your code on Enterprise flow instead",id:"YZKJrKWmw1"}));break;case"INVALID_COUNTRY":B(q({defaultMessage:"This coupon is not eligible in your region",id:"8s/f85HGbN"}));break;default:B(q({defaultMessage:"Invalid promo code. Please try copying and pasting the code, and check for any typos.",id:"ktRxx2D/+e"}))}}},[w,t,er,y,Z,q,a.maskPromoCodeFromQueryParams]);(0,s.useEffect)(()=>{w("pro partner landing page viewed",{partnerCode:t})},[w,t]),(0,s.useEffect)(()=>{ea&&z&&el(ea)},[ea,z,el]),(0,s.useEffect)(()=>{t&&es&&!L.includes(t)&&et(t)},[et,t,es]),(0,s.useEffect)(()=>{if(T){G(T),el(T);let e=new URLSearchParams(null==O?void 0:O.toString());e.delete(P),(0,g.hf)(Object.fromEntries(e))}},[T,el,Z,ee,O]);let ei=X?(0,r.jsx)("img",{src:"https://r2cdn.perplexity.ai/partner-logos/".concat(t,"/logo-").concat("dark"===H?"dark":"light",".svg"),alt:"",className:n()("h-[44px] w-full max-w-[220px] object-contain object-center md:max-w-[300px]")}):(0,r.jsx)(h.W,{className:"bg-subtler h-[44px] w-full rounded"}),en=(0,s.useMemo)(()=>es?z?"COUPON":"LOGIN":"ALREADY_PRO",[es,z]),eo=(0,R.YW)(en).with("COUPON",()=>(0,r.jsx)(U,{partnerMessages:i,partnerConfig:a})).with("LOGIN",()=>(0,r.jsx)(b.A,{className:"text-center",children:q({defaultMessage:"Sign in or create an account to get started",id:"PgvTlRYI42"})})).with("ALREADY_PRO",()=>null).exhaustive(),ec=(0,R.YW)(en).with("COUPON",()=>(0,r.jsx)(F,{error:V,handleCheckCode:el,loading:W.current,promo:Y,setPromo:G,setError:B,partnerConfig:a,partnerMessages:i,hasCodeFromQueryParams:!!T})).with("LOGIN",()=>(0,r.jsx)(f.A,{autoFocus:!0,redirectUrl:"/join/p/".concat(t,"/").concat(Y,"?").concat(A.cp2,"=partnerships&").concat(A.HR9,"=").concat(t),className:"w-full",disallowedMethods:d,showCloseButton:m})).with("ALREADY_PRO",()=>(0,r.jsx)(I,{})).exhaustive();return(0,r.jsx)(v.bL,{children:(0,r.jsxs)(v.q7,{children:[(0,r.jsxs)("div",{className:"space-y-md",children:[(0,r.jsx)(j.Ay,{className:"mb-md flex w-full items-center justify-center",children:a.includeLandingLogo?ei:(0,r.jsx)(M.g,{variant:"text",isPro:!0})}),(0,r.jsxs)("div",{className:"gap-md space-y-sm flex flex-col",children:[eo&&(0,r.jsx)("div",{className:"space-y-xs flex flex-1 flex-col",children:eo}),(0,r.jsx)(j.Ay,{className:"gap-sm space-y-xs flex flex-1 flex-col items-center justify-center",children:ec})]})]}),(0,r.jsx)("div",{className:n()("gap-sm bg-base absolute inset-0 flex flex-col items-center justify-center overflow-hidden rounded-xl duration-200",{"pointer-events-none opacity-0":!J}),children:(0,r.jsxs)(u,{className:"flex size-full flex-col items-center justify-center",innerClassName:"flex-col flex gap-md justify-center items-center",fadeOut:!0,children:[(0,r.jsx)(E.A,{icon:C.c,size:"2xl",className:"text-foreground"}),(0,r.jsx)(b.A,{children:q({defaultMessage:"Promo Code Applied",id:"zaQTWZuh0E"})})]})})]},"wrapper")})},U=e=>{let{partnerMessages:t,partnerConfig:a}=e,{$t:s}=(0,l.A)();return(0,r.jsxs)(r.Fragment,{children:[t.title&&(0,r.jsx)(b.A,{variant:"section-title",className:"text-center",children:t.title}),t.description&&(0,r.jsx)(b.A,{className:"text-center",children:t.description}),a.defaultPrice&&(0,r.jsxs)(j.Ay,{className:"!mt-md gap-md px-md py-sm grid w-full grid-cols-2 justify-center rounded border",children:[(0,r.jsxs)(j.Ay,{className:"flex flex-col items-start border-r",children:[(0,r.jsx)(b.A,{color:"light",variant:"small",children:s({defaultMessage:"Normal Price",id:"ZKWbx9vxVV"})}),(0,r.jsx)(b.A,{className:"line-through",color:"light",children:(()=>{let e;return a.defaultPrice?(a.billingPeriod&&(e="month"===a.billingPeriod?" / ".concat(s({defaultMessage:"Month",id:"TBovrxFZgY"})):" / ".concat(s({defaultMessage:"Year",id:"IFo1ooSAuf"}))),"".concat(a.currencySymbol).concat(a.defaultPrice).concat(e)):""})()})]}),(0,r.jsxs)("div",{className:"flex flex-col items-start",children:[(0,r.jsx)(b.A,{color:"light",variant:"small",children:s({defaultMessage:"You Pay",id:"CeculwWoct"})}),(0,r.jsxs)(b.A,{variant:"baseSemi",children:[a.currencySymbol,"0"]})]})]})]})},I=()=>{let{$t:e}=(0,l.A)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.A,{variant:"base",color:"light",className:"text-center",children:e({defaultMessage:"You've previously subscribed to {pplx} {pro}. This promotion is only valid for first-time subscribers.",id:"dPDv26Ppyc"},{pplx:"Perplexity",pro:"Pro"})}),(0,r.jsx)(y.A,{variant:"primary",extraCSS:"w-full",text:e({defaultMessage:"Return home",id:"UsiviBOGc+"}),href:"/"})]})},F=e=>{let{handleCheckCode:t,setError:a,setPromo:i,promo:o,loading:c,error:d,partnerMessages:u,partnerConfig:m,hasCodeFromQueryParams:f}=e,{$t:h}=(0,l.A)(),{isMobileUserAgent:x}=(0,P.al)(),p=!o||c,[g,v]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{d&&!g&&m.maskPromoCodeFromQueryParams&&(i(""),v(!0))},[d,m.maskPromoCodeFromQueryParams,g,i]),(0,r.jsxs)(r.Fragment,{children:[u.enterCodeToContinue&&(0,r.jsx)(b.A,{variant:"tiny",color:"light",className:"mt-lg max-w-sm text-center font-normal",children:u.enterCodeToContinue}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(o)},className:"gap-sm flex w-full max-w-md flex-col",children:[(0,r.jsx)(w.Ay,{value:o,disabled:c,isMobileUserAgent:x,placeholder:h({defaultMessage:"Promo Code",id:"CyOkb5b1xl"}),onChange:e=>{a(""),i(e)},onKeyDown:e=>{"Enter"===e.code&&t(o)},type:m.maskPromoCodeFromQueryParams&&f&&!g?"password":"text",className:"p-sm rounded-lg md:min-w-[250px]",labelMargin:!1,variant:"monospace",pill:!1}),d&&(0,r.jsx)(b.A,{className:"mb-sm text-center",variant:"tiny",color:"red",children:d}),(0,r.jsx)(y.A,{type:"submit",variant:"primary",text:h({defaultMessage:"Continue",id:"acrOozm08x"}),isLoading:c,disabled:p,extraCSS:n()("!opacity-100",{"!bg-inverse":!p})})]})]})}},47575:(e,t,a)=>{a.d(t,{E:()=>n});var r=a(85860),s=a(98188);let l={pro:"pro",max:"max"},i=e=>Object.keys(l).includes(e);function n(){var e,t,a,l;let{session:n}=(0,s.N)(),o=null!==(l=null==n?void 0:null===(e=n.user)||void 0===e?void 0:e.subscription_status)&&void 0!==l?l:"none",c="active"===o||"trialing"===o||"white_glove_past_due"===o,d=null==n?void 0:null===(t=n.user)||void 0===t?void 0:t.subscription_tier,u=i(d)?d:void 0,m=c&&("pro"===u||!u),f=c&&"max"===u,h=m||f,x=c?null==n?void 0:null===(a=n.user)||void 0===a?void 0:a.subscription_source:"none",p=c&&"enterprise"===x,g=p&&("pro"===u||!u),v=p&&"max"===u;return(0,r.useMemo)(()=>({isPro:m,isMax:f,hasAccessToProFeatures:h,hasActiveSubscription:c,subscriptionSource:x,subscriptionStatus:o,subscriptionTier:u,isEnterprise:p,isEnterprisePro:g,isEnterpriseMax:v}),[h,f,m,c,x,o,u,p,g,v])}},56292:(e,t,a)=>{a.d(t,{m:()=>s});var r=a(85860);let s=()=>{let[e,t]=r.useState(!1);return r.useEffect(()=>{t(!0)},[]),e}},83105:(e,t,a)=>{a.d(t,{L:()=>i});var r=a(85860),s=a(98188),l=a(16079);function i(){let{status:e}=(0,s.N)(),t="authenticated"===e;return(0,r.useEffect)(()=>{t&&(0,l.kv)()},[t]),t}},84607:(e,t,a)=>{function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URL(window.location.href);for(let[a,r]of Object.entries(e))void 0===r?t.searchParams.delete(a):t.searchParams.set(a,r);s(Object.fromEntries(t.searchParams))}function s(e){let t=new URL(window.location.href),a=(e?new URLSearchParams(e):new URLSearchParams).toString();a!==t.searchParams.toString()&&window.history.replaceState({},"","?".concat(a))}a.d(t,{MM:()=>r,hf:()=>s})},89412:(e,t,a)=>{a.d(t,{AR:()=>d,bL:()=>u,lu:()=>c,q7:()=>m});var r=a(25576),s=a(43084),l=a(18507),i=a(38806),n=a(52243),o=a(56292);let c=(0,n.A)(.16,1,.3,1),d=(0,n.A)(.7,0,.84,0),u=e=>{let{children:t,initial:a=!1,mode:n="wait",className:c,transition:d,supportZeroHeight:u=!0,...m}=e,[f,{height:h}]=(0,s.A)(),x=(0,o.m)();return(0,r.jsx)(l.P.div,{animate:{height:x?u?h:h>0?h:"auto":"auto"},className:c,transition:d,...m,children:(0,r.jsx)("div",{ref:f,children:(0,r.jsx)(i.N,{mode:n,initial:a,children:t})})})},m=e=>{let{children:t,initial:a={opacity:0},animate:s={opacity:1},exit:i,transition:n,className:o,style:c,ref:d}=e;return(0,r.jsx)(l.P.div,{initial:a,animate:s,exit:null!=i?i:a,transition:n,ref:d,className:o,style:c,children:t})}}}]);
//# sourceMappingURL=8126-3b4772b4b420d50e.js.map