"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8481],{11129:(e,t,r)=>{r.d(t,{$8:()=>v,B$:()=>V,Bk:()=>d,CM:()=>_,Ci:()=>l,Cj:()=>R,Dj:()=>c,Dr:()=>A,Ek:()=>b,HS:()=>x,Hn:()=>n,JP:()=>D,Nw:()=>W,OM:()=>h,Og:()=>w,PB:()=>K,Q:()=>M,Tl:()=>o,UW:()=>I,U_:()=>s,ZW:()=>Q,Zt:()=>f,Zz:()=>S,_E:()=>j,_m:()=>L,cM:()=>C,dT:()=>O,dx:()=>P,eH:()=>B,fH:()=>T,gb:()=>q,kC:()=>i,kP:()=>a,lU:()=>k,mo:()=>G,p8:()=>U,pE:()=>y,pY:()=>z,qs:()=>N,rO:()=>p,tX:()=>H,vW:()=>u,wp:()=>m,xw:()=>F});let i=e=>["get_prices",{subscription_tier:e}],s=()=>["get_user_settings",{}],n=()=>["get_user_promotions",{}],o=()=>["get_government_origin",{}],a=e=>["get_special_profile",{profile_name:e}],u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"you";return["list_feed",{topic:e}]},c=()=>["userOrgData",{}],l=e=>["get_collection",{collection_slug:e.slice(-22)}],d=()=>["shoppingOrders",{}],p=()=>["userTryOnPhoto",{}],_=()=>["shoppingTryOnBackgroundGeneration"],y=e=>["productTryOn",{productImageUrl:e}],g="getOrganizationUsers",m=e=>e?[g,"members",e]:[g,"members"],w=e=>["get_thread_by_uuid",{uuid:e}],h=e=>["get_article_by_uuid",{uuid:e}],b=()=>["customer_shopping_info",{}],T=e=>["articleResults",{frontend_context_uuid:e}],f=e=>["article-slug",e],E=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[t?"list_file_directory_infinite":"list_file_directory",e.file_repository_type,e.owner_id]},v=function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,n=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return[...E({file_repository_type:e,owner_id:t},n),r,...n?[]:[i],s]},S="connector-files",R="connector-files-infinite",I=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[t?R:S,e]},O=e=>["get_sharepoint_sites_infinite",null!=e?e:{}],P=e=>e?["memories",e]:["memories"],M=(e,t)=>["file_exists",e,...t?[t]:[]],C=e=>["download-image-url",...e?[e]:[]],F=e=>["entry-feedback",e],B=e=>["user-task",e],A=e=>["user-tasks",...e?[e]:[]],G=()=>["check-edu-institution"],k=()=>["list_spaces_mentions"],H=()=>["upgrade-subscription-preview"],N=()=>["subscription-changes"],L=e=>["visa-iframe-token",e],j=()=>["visa-redemption"],q=()=>["task_shortcuts_mentions"],D=e=>["task_shortcuts_copy",e],U=()=>["braintree-subscription-details"],Q="get_repository_upload_states",x=e=>[Q,e],z=()=>["get_seat_info"],W="space-file-errors",K=e=>[W,e],V=["third-party-personalization-status"]},38481:(e,t,r)=>{r.d(t,{E_:()=>j,HI:()=>N,LO:()=>H,Me:()=>F,PF:()=>k,Q_:()=>O,U7:()=>f,XU:()=>I,YA:()=>w,createApiGroupV2:()=>E,fw:()=>h,g0:()=>L,getAPIGroupsV2:()=>v,gy:()=>y,jh:()=>g,le:()=>M,m6:()=>q,mD:()=>A,n6:()=>T,r3:()=>m,yA:()=>b,zS:()=>D});var i,s=r(15492),n=r(4428),o=r(85109),a=r(77150),u=r(77917),c=r(11129),l=r(16672),d=r(18360),p=r(3041);let _=(e,t)=>{let r=null==t?void 0:t.detail,i=r&&"object"==typeof r&&"error_code"in r&&r.error_code||e;return new a.T("API_CLIENTS_ERROR",{message:i,cause:t,details:{errorDetail:r}})},y=async e=>{let{reason:t}=e;try{let{error:e,data:r}=await u.By.GET("/rest/user/promotions",t,{timeoutMs:(0,u.e4)({productionMs:2e3})});if(e)throw new a.T("API_CLIENTS_ERROR",{message:"Failed to fetch user promotions",cause:e});return r}catch(e){return{campaign:null,offer:null,institution:null}}},g=async e=>{let{headers:t,reason:r}=e;try{let{data:e,error:i}=await u.By.GET("/rest/billing/get-customer-portal",r,{headers:t,timeoutMs:3e3});if(i||"success"!==e.status)throw new a.T("API_CLIENTS_ERROR",{message:"Failed to get customer portal",cause:i});return e.url}catch(e){return null}};async function m(e){let{currency:t,reason:r,subscriptionTier:i}=e,{error:s,data:n}=await u.By.GET("/rest/stripe/prices",r,{timeoutMs:u.dS.NONE,params:{query:{currency:t,subscription_tier:i}}});if(s)throw new a.T("API_CLIENTS_ERROR",{message:"Failed to fetch prices",cause:s});return n}let w=e=>{let{currency:t,reason:r,subscriptionTier:i}=e;return(0,s.useQuery)({queryKey:["prices",t,i],queryFn:()=>m({currency:t,reason:r,subscriptionTier:i}),gcTime:3e5,staleTime:12e4})},h=async e=>{let{request:t,reason:r}=e,i=(0,o.Qo)(),s=(0,l.cH)(),n={"content-type":"application/json",...i?{"Screen-Dimensions":i}:{}};try{var c,d,p,_;let{data:e,error:i}=await u.By.POST("/rest/stripe/checkout-session",r,{body:{referral_code:t.referralCode,discount_code:t.discountCode,origin:t.origin,tier:t.tier,locale:t.locale,visitor_id:s,embedded:null!==(c=t.embedded)&&void 0!==c&&c,subscription_tier:t.subscriptionTier,success_redirect_url:t.success_redirect_url},timeoutMs:5e3,headers:n,reason:r});if(i)throw new a.T("API_CLIENTS_ERROR",{cause:i,details:{reason:r}});return{subscriptionStatus:e.subscription_status,status:e.status,url:null!==(d=e.url)&&void 0!==d?d:null,clientSecret:null!==(p=e.client_secret)&&void 0!==p?p:void 0,errorCode:null!==(_=e.error_code)&&void 0!==_?_:void 0,subscriptionTier:t.subscriptionTier}}catch(e){return}},b=async e=>{let{request:t,headers:r,reason:i}=e;try{let{data:e,error:s}=await u.By.POST("/rest/stripe/create-setup-intent",i,{body:{is_updating:t.isUpdating},timeoutMs:(0,u.e4)({productionMs:2500}),headers:r});if(s)throw new a.T("API_CLIENTS_ERROR",{cause:s,details:{reason:i}});return{clientSecret:e.client_secret}}catch(e){return}},T=async e=>{let{headers:t,reason:r}=e;try{let{data:e,error:i}=await u.By.POST("/rest/stripe/create-setup-intent-and-customer-session",r,{timeoutMs:(0,u.e4)({productionMs:3e3}),headers:t});if(i)throw new a.T("API_CLIENTS_ERROR",{cause:i,details:{reason:r}});return{customerId:e.customer_id,clientSecret:e.client_secret,customerSessionClientSecret:e.customer_session_client_secret}}catch(e){return}},f=async e=>{let{discountCode:t,subscriptionTier:r="pro",subscriptionSegment:i="consumer",headers:s,reason:n}=e;try{let{data:e,error:o}=await u.By.GET("/rest/billing/get-coupon-metadata",n,{params:{query:{discount_code:t,subscription_tier:r,subscription_segment:i}},headers:s});if(o)throw new a.T("API_CLIENTS_ERROR",{cause:o,details:{reason:n}});return e.status,e}catch(e){return null}};!function(e){e.WINDOWSAPP="windowsapp",e.MACAPP="macapp",e.COMET="comet"}(i||(i={}));let E=async e=>{let{displayName:t,address:r,description:i,contactInfo:s,reason:n}=e;try{let{error:e,data:o}=await u.By.POST("/rest/pplx-api/v2/groups",n,{timeoutMs:9e3,headers:{"content-type":"application/json"},body:{display_name:t,address:r,description:i,contact_info:s}});if(e)throw new a.T("API_CLIENTS_ERROR",{message:"Failed to create API group",cause:e});return o.org}catch(e){return p.vF.log(e),null}},v=async e=>{let{reason:t}=e;try{var r;let{data:e}=await u.By.GET("/rest/pplx-api/v2/groups",t,{timeoutMs:1e4,numRetries:1,reason:t});return null!==(r=null==e?void 0:e.orgs)&&void 0!==r?r:d.Ml}catch(e){return p.vF.log("Error in ".concat("getAPIGroupsV2",":"),e),[]}},S=async e=>{let{headers:t,reason:r}=e,{error:i,data:s}=await u.By.GET("/rest/stripe/upgrade-subscription-preview",r,{headers:{"content-type":"application/json",...t},timeoutMs:u.dS.HIGH});if(i)throw _("Failed to fetch upgrade subscription preview",i);return s},R=async e=>{let{headers:t,reason:r}=e,{error:i,data:s}=await u.By.GET("/rest/stripe/downgrade-subscription-preview",r,{headers:{"content-type":"application/json",...t},timeoutMs:u.dS.HIGH});if(i)throw _("Failed to fetch downgrade subscription preview",i);return s},I=e=>{let{reason:t,enabled:r}=e;return(0,s.useQuery)({queryKey:(0,c.tX)(),queryFn:()=>S({reason:t}),gcTime:0,staleTime:0,enabled:r})},O=e=>{let{reason:t}=e;return(0,s.useQuery)({queryKey:["downgrade-subscription-preview"],queryFn:()=>R({reason:t}),gcTime:0,staleTime:0})},P=async e=>{let{headers:t,reason:r}=e,{error:i,data:s}=await u.By.POST("/rest/stripe/upgrade-subscription",r,{headers:{"content-type":"application/json",...t},timeoutMs:u.dS.HIGH});if(i)throw _("Failed to upgrade subscription",i);return s},M=(e,t)=>{let{reason:r}=e;return(0,n.useMutation)({retry:!1,mutationFn:()=>P({reason:r}),onError:e=>{p.vF.error("Error in ".concat("useUpgradeSubscription",":"),e)},...t})},C=async e=>{let{headers:t,reason:r}=e,{error:i,data:s}=await u.By.POST("/rest/stripe/downgrade-subscription",r,{headers:{"content-type":"application/json",...t},timeoutMs:u.dS.HIGH});if(i)throw _("Failed to downgrade subscription",i);return s},F=(e,t)=>{let{reason:r}=e;return(0,n.useMutation)({mutationFn:()=>C({reason:r}),onError:e=>{p.vF.error("Error in ".concat("useDowngradeSubscription",":"),e)},...t})},B=async e=>{let{reason:t}=e,{error:r,data:i}=await u.By.GET("/rest/stripe/subscription-changes",t,{headers:{"content-type":"application/json"},timeoutMs:u.dS.HIGH});if(r)throw new a.T("API_CLIENTS_ERROR",{message:"Failed to fetch subscription changes",cause:r});return i},A=e=>{let{reason:t,enabled:r}=e;return(0,s.useQuery)({queryKey:(0,c.qs)(),queryFn:()=>B({reason:t}),gcTime:0,staleTime:0,enabled:r})},G=async e=>{let{reason:t}=e,{error:r,data:i}=await u.By.POST("/rest/stripe/cancel-downgrade-subscription",t,{headers:{"content-type":"application/json"},timeoutMs:u.dS.HIGH});if(r)throw _("Failed to cancel downgrade",r);return i},k=(e,t)=>{let{reason:r}=e;return(0,n.useMutation)({retry:!1,mutationFn:()=>G({reason:r}),onError:e=>{p.vF.error("Error in ".concat("useCancelDowngrade",":"),e)},...t})},H=async e=>{let{reason:t}=e,{error:r,data:i}=await u.By.GET("/rest/billing/visa/get-token",t,{timeoutMs:6e3});if(r)throw new a.T("API_CLIENTS_ERROR",{message:"Failed to fetch visa iframe token",cause:r});return i},N=async e=>{let{reason:t,correlationId:r}=e,i=(0,l.cH)(),{error:s,data:n}=await u.By.POST("/rest/billing/visa/redemption",t,{timeoutMs:6e3,body:{correlation_id:r,visitor_id:i}});if(s)throw new a.T("API_CLIENTS_ERROR",{message:"Failed to redeem visa",cause:s});return n},L=async e=>{let{paymentMethodUUID:t,optedIn:r}=e,{error:i,data:s}=await u.By.POST("/rest/billing/personalization/update","visa-opt-in-submit",{body:{enabled:r,payment_method_uuid:t}});if(i)throw new a.T("API_CLIENTS_ERROR",{message:"Failed to redeem visa",cause:i});return s},j=async()=>{let e=await u.By.GET("/rest/billing/braintree/subscription-details","braintree-modal-fetch-details",{timeoutMs:5e3});if(e.error)throw e.error;return e.data},q=async e=>{let{payment_method_type:t}=e,r=await u.By.POST("/rest/billing/braintree/cancel-subscription","braintree-modal-cancel",{timeoutMs:5e3,body:{payment_method_type:t}});if(r.error)throw r.error;return r.data},D=async e=>{let{payment_method_type:t}=e,r=await u.By.POST("/rest/billing/braintree/renew-subscription","braintree-modal-renew",{timeoutMs:3e3,body:{payment_method_type:t}});if(r.error)throw r.error;return r.data}}}]);
//# sourceMappingURL=8481-d1ee70f1924f2c9f.js.map